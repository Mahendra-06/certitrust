{"ast":null,"code":"import _objectSpread from\"D:/SIH prototype/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BaseRegister=_ref=>{let{title,description,icon:Icon,iconColor,children,onSubmit,initialFormData}=_ref;const[formData,setFormData]=useState(initialFormData);const[error,setError]=useState('');const[isLoading,setIsLoading]=useState(false);const navigate=useNavigate();const handleInputChange=e=>{const target=e.target;const name=target.name;const value='type'in target&&target.type==='checkbox'?target.checked:target.value;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleSubmit=async e=>{e.preventDefault();setIsLoading(true);setError('');try{const result=await onSubmit(formData);if(result.success){const userType=formData.role||'user';navigate(\"/dashboard/\".concat(userType),{replace:true});}else{setError(result.message);}}catch(err){setError('Registration failed. Please try again.');console.error('Registration error:',err);}finally{setIsLoading(false);}};const handleBack=()=>{navigate(-1);// Go back to the previous page\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8 relative\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleBack,className:\"absolute top-4 left-4 inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"-ml-1 mr-2 h-5 w-5 text-gray-500\",xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 20 20\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z\",clipRule:\"evenodd\"})}),\"Back\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"sm:mx-auto sm:w-full sm:max-w-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 rounded-full \".concat(iconColor,\" flex items-center justify-center\"),children:/*#__PURE__*/_jsx(Icon,{className:\"h-8 w-8 text-white\"})})}),/*#__PURE__*/_jsx(\"h2\",{className:\"mt-6 text-center text-3xl font-extrabold text-gray-900\",children:title}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-center text-sm text-gray-600\",children:description})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\",children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 bg-red-50 border-l-4 border-red-400 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5 text-red-400\",xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 20 20\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",clipRule:\"evenodd\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-3\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-700\",children:error})})]})}),/*#__PURE__*/_jsx(\"form\",{className:\"space-y-6\",onSubmit:handleSubmit,children:typeof children==='function'?children({formData,handleInputChange,isLoading}):React.Children.map(children,child=>{if(/*#__PURE__*/React.isValidElement(child)){return/*#__PURE__*/React.cloneElement(child,_objectSpread(_objectSpread({},child.props),{},{// Spread existing props first\nformData,handleInputChange,isLoading}));}return child;})})]})})]});};export default BaseRegister;","map":{"version":3,"names":["React","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","BaseRegister","_ref","title","description","icon","Icon","iconColor","children","onSubmit","initialFormData","formData","setFormData","error","setError","isLoading","setIsLoading","navigate","handleInputChange","e","target","name","value","type","checked","prev","_objectSpread","handleSubmit","preventDefault","result","success","userType","role","concat","replace","message","err","console","handleBack","className","onClick","xmlns","viewBox","fill","fillRule","d","clipRule","Children","map","child","isValidElement","cloneElement","props"],"sources":["D:/SIH prototype/Frontend/src/pages/register/BaseRegister.tsx"],"sourcesContent":["import React, { useState, ReactElement } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../../contexts/AuthContext';\n\ntype InputChangeEvent = React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>;\n\ninterface FormComponentProps {\n  formData: any;\n  handleInputChange: (e: InputChangeEvent) => void;\n  isLoading: boolean;\n  [key: string]: any; // For any additional props\n}\n\ntype BaseRegisterProps = {\n  title: string;\n  description: string;\n  icon: React.ElementType;\n  iconColor: string;\n  children: \n    | React.ReactNode\n    | ((props: {\n        formData: any;\n        handleInputChange: (e: InputChangeEvent) => void;\n        isLoading: boolean;\n      }) => React.ReactNode);\n  onSubmit: (formData: any) => Promise<{ success: boolean; message: string }>;\n  initialFormData: any;\n};\n\nconst BaseRegister: React.FC<BaseRegisterProps> = ({\n  title,\n  description,\n  icon: Icon,\n  iconColor,\n  children,\n  onSubmit,\n  initialFormData\n}) => {\n  const [formData, setFormData] = useState(initialFormData);\n  const [error, setError] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const navigate = useNavigate();\n\n  const handleInputChange = (e: InputChangeEvent) => {\n    const target = e.target as HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement;\n    const name = target.name;\n    const value = 'type' in target && target.type === 'checkbox' \n      ? (target as HTMLInputElement).checked \n      : target.value;\n      \n    setFormData((prev: any) => ({\n      ...prev,\n      [name]: value,\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setError('');\n\n    try {\n      const result = await onSubmit(formData);\n      \n      if (result.success) {\n        const userType = formData.role || 'user';\n        navigate(`/dashboard/${userType}`, { replace: true });\n      } else {\n        setError(result.message);\n      }\n    } catch (err) {\n      setError('Registration failed. Please try again.');\n      console.error('Registration error:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleBack = () => {\n    navigate(-1); // Go back to the previous page\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8 relative\">\n      {/* Back Button */}\n      <button\n        onClick={handleBack}\n        className=\"absolute top-4 left-4 inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n      >\n        <svg className=\"-ml-1 mr-2 h-5 w-5 text-gray-500\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n          <path fillRule=\"evenodd\" d=\"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z\" clipRule=\"evenodd\" />\n        </svg>\n        Back\n      </button>\n\n      <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\n        <div className=\"flex justify-center\">\n          <div className={`w-16 h-16 rounded-full ${iconColor} flex items-center justify-center`}>\n            <Icon className=\"h-8 w-8 text-white\" />\n          </div>\n        </div>\n        <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\n          {title}\n        </h2>\n        <p className=\"mt-2 text-center text-sm text-gray-600\">\n          {description}\n        </p>\n      </div>\n\n      <div className=\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\">\n        <div className=\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\">\n          {error && (\n            <div className=\"mb-4 bg-red-50 border-l-4 border-red-400 p-4\">\n              <div className=\"flex\">\n                <div className=\"flex-shrink-0\">\n                  <svg className=\"h-5 w-5 text-red-400\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                    <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\n                  </svg>\n                </div>\n                <div className=\"ml-3\">\n                  <p className=\"text-sm text-red-700\">{error}</p>\n                </div>\n              </div>\n            </div>\n          )}\n\n          <form className=\"space-y-6\" onSubmit={handleSubmit}>\n            {typeof children === 'function'\n              ? children({ formData, handleInputChange, isLoading })\n              : React.Children.map(children, child => {\n                  if (React.isValidElement<FormComponentProps>(child)) {\n                    return React.cloneElement(child, {\n                      ...child.props, // Spread existing props first\n                      formData,\n                      handleInputChange,\n                      isLoading\n                    });\n                  }\n                  return child;\n                })}\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BaseRegister;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}